**目录：**

- [10. 表单](#10-表单)
  - [10.1. form](#101-form)
    - [10.1.1. action](#1011-action)
    - [10.1.2. method](#1012-method)
    - [10.1.3. enctype](#1013-enctype)
    - [10.1.4. autocomplete](#1014-autocomplete)
    - [10.1.5. target](#1015-target)
    - [10.1.6. name](#1016-name)
    - [10.1.7. form 属性](#1017-form-属性)
  - [10.2. input](#102-input)
    - [10.2.1. 公共属性](#1021-公共属性)
    - [10.2.2. 用作文本输入](#1022-用作文本输入)
    - [10.2.3. 用作数据输入](#1023-用作数据输入)
    - [10.2.4. 用作搜索控件](#1024-用作搜索控件)
    - [10.2.5. 用作隐藏控件](#1025-用作隐藏控件)
    - [10.2.6. 用作文件上传](#1026-用作文件上传)
  - [10.3. button](#103-button)
    - [10.3.1. submit](#1031-submit)
    - [10.3.2. reset](#1032-reset)
    - [10.3.3. 一般用法](#1033-一般用法)
  - [10.4. label](#104-label)
  - [10.5. fieldset](#105-fieldset)

# 10. 表单

表单是 HTML 中获取用户输入的手段。它对于 Web 应用系统极其重要，然而 HTML 定义的功能落后于表单的使用方式已有多年。在 HTML5 中，整个表单系统巳经彻底改造过，面貌焕然一新，标准的步伐已经跟上了表单的应用实践。

## 10.1. form

HTML `<form>` 元素表示文档中的一个区域，此区域包含交互控件，用于向 Web 服务器提交信息。

下表总结了 form 元素。

| 元素         | form                                                                            |
| ------------ | ------------------------------------------------------------------------------- |
| 元素类型     | 流                                                                              |
| 父元素       | 可以包含流元素的元素，但不能是 form                                             |
| 局部属性     | action, accept-charset, method, enctype, name, autocomplete, target, novalidate |
| 内容         | 流元素，主要是 label 和 input                                                   |
| 标签         | 开始标签+内容+结束标签                                                          |
| 关于 html5   | 新增了 novalidate, autocomplete                                                 |
| 用户代理样式 | display: block; margin-top: 0em;                                                |

### 10.1.1. action

action 属性说明了提交表单时浏览器应该把从用户收集的数据发送到什么地方。我想把数据提交给自己用 nodejs 编写的 web 服务器处理，所以要把表单发至开发服务器 localhost 上位于 8080 端口的/form 这个 URL。

下面的代码展示了这个用法：

```html
<form method="post" action="http://titan:8o8o/form"></form>
```

如果不设置 form 元素的 action 属性， 那么浏览器会将表单数据发到用以加载该 HTML 文档的 URL。这看似毫无意义，其实不然，好几个流行的 Web 应用系统开发框架都依赖于这个特性。

如果为 action 属性指定的是一个相对 URL，那么该值会被嫁接在当前页的 URL（如果使用了介绍过的 base 元素，则是该元素的 href 属性值）的后面。

下面的代码展示了这一点：

```html
<head>
  ...
  <base href="http://localhost:8080" />
  ...
</head>
<body>
  <form action="/form" method="post"></form>
</body>
```

### 10.1.2. method

method 属性指定了用来将表单数据发送到服务器的 HTTP 方法。允许的值有 get 和 post 这两个，它们分别对应于 HTTP 的 GET 和 POST 方法。未设置 method 属性时使用的默认值为 get。

GET 请求是安全的，同一个请求可以发起任意多次而不会产生额外作用。POST 请求则用于不安全交互，提交数据的行为会导致服务器状态的改变。

### 10.1.3. enctype

当 method 属性值为 post 时，enctype 就是将表单的内容提交给服务器的 MIME 类型 。可能的取值有：

- application/x-www-form-urlencoded：未指定属性时的默认值。
- multipart/form-data：当表单包含 type=file 的 `<input>` 元素时使用此值。
- text/plain：出现于 HTML5，用于调试。

这个值可被 `<button>`、`<input type="submit">` 或 `<input type="image">` 元素上的 formenctype 属性覆盖。

下面的例子展示了文件上传的表单：

```html
<form action="/fileupload" method="post" enctype="multipart/form-data">
  <label for="fileupload">上传文件：</label>
  <input type="file" name="file" id="" />
  <button type="submit">上传</button>
</form>
```

### 10.1.4. autocomplete

浏览器可以记住用户输入表单的数据，并在再次遇到类似表单的时候自动使用这些数据帮用户填写。这种技术可以让用户免于反复输入同样的数据之苦。这方面的一个典型例子是用户在线购买商品或服务的时候输入的姓名和送货信息。每个网站都有自己的购物车和注册程序，但是浏览器可以使用用户在其他表单中输入过的数据加快结账过程。用以判断哪些数据可以重复使用的技术因浏览器而异，不过一种常用的方法是查看 input 元素的 name 属性。

一般来说，表单的自动完成功能有益于用户，对 Web 应用系统也有一点帮助。不过有时网页作者并不想让浏览器自动填写表单。

下面的代码示范了如何使用 form 元素的 autocomplete 属性达到这个目的。

```html
<form autocomplete="off" method="post" action="http://localhost:8080/form">
  <input name="fave" />
  <input name="name" />
  <button>Submit Vote</button>
</form>
```

autocomplete 属性允许的值有两个：on 和 off。如果不设置这个属性的话，其默认值为 on, 表示允许浏览器填写表单。

input 元素也有 autocomplete 属性，可以用于单个元素的自动完成功能，form 元素的 autocomplete 属性设置的是表单中的 input 元素默认的行为方式。而各个 input 元素在该属性上的设置可以覆盖这个默认行为方式。上面的代码清单正是这样做的。此例在 form 元素上禁用了自动完成功能，但在第一个 input 元素上 􀃮 仅是在这个元素上，又重新开启了该功能。
至于第二个 input 元素，因为没有设置 autocomplete 属性，所以采用的是 form 层面的设置。

一般来说，最好让自动完成功能保持开启状态。用户习惯让浏览器自动填写表单，而且在网上办理任何一种业务时往往都会用到好几个表单。关闭这个功能千涉了用户的偏好和工作习惯。根据我自己的体会，在禁用了自动完成功能的网站上购物有点折磨人，尤其是需要在表单中填写姓名和地址等非常基本的信息的时候。有些网站对信用卡数据禁用自动完成功能，这个更有意义一点。不过即便如此，这种做法也要谨慎使用，要充分考虑各种理由。

### 10.1.5. target

默认情况下浏览器会用提交表单后服务器反馈的信息替换表单所在的原页面。这可以用 form 元素的 target 属性予以改变。该属性的工作机制与 a 元素的 target 属性一样。

### 10.1.6. name

name 属性可以用来为表单设置一个独一无二的标识符，以便使用 DOM 时区分各个表单。

提交表单时其 name 属性值不会被发送给服务器，所以该属性的用处仅限于 DOM 中，不像 input 元素的同名属性那么重要。要是 input 元素不设置 name 属性，那么用户在其中输入的数据在提交表单时不会被发送给服务器。

### 10.1.7. form 属性

在 HTML4 中，input 、button 和其他与表单相关的元素必须放在 form 元素中。本章前面所有例子都是这样做的。在 HTML5 中，这条限制不复存在。现在可以将这类元素与文档中任何地方的表单挂钩。input 、button 元素以及其他与表单相关的元素都定义了一个 form 属性，该属性正是用于这个目的。要将某个这类元素与并非其祖先元素的 form 元素挂钩，只需要将其 form 属性设置为相关 form 元素的 id 属性值即可。

## 10.2. input

第二种关键元素是 input, 其用途是收集用户输入数据。input 元素在浏览器中显示为一个简单的文本框。用户就在这个文本框中输入内容。这是最基本的一种 input 元素。后面会介绍收集用户输入数据的多种选择，包括 HTML5 中新增的一些很棒的特性。

下表概括了 input 元素。

| 元素         | input                                    |
| ------------ | ---------------------------------------- |
| 元素类型     | 短语                                     |
| 父元素       | 可以包含短语元素的元素                   |
| 局部属性     | autofocus, name, disabled, form, type 等 |
| 内容         | 无                                       |
| 标签         | 开始标签                                 |
| 关于 html5   | 新增了各种 type 的 input 元素            |
| 用户代理样式 | 见下                                     |

input 的用户代理样式比较复杂，各个 type 的 input 都有自己的用户代理样式。

```css
input {
  -webkit-writing-mode: horizontal-tb !important;
  font-style: ;
  font-variant-ligatures: ;
  font-variant-caps: ;
  font-variant-numeric: ;
  font-variant-east-asian: ;
  font-weight: ;
  font-stretch: ;
  font-size: ;
  font-family: ;
  text-rendering: auto;
  color: -internal-light-dark(black, white);
  letter-spacing: normal;
  word-spacing: normal;
  line-height: normal;
  text-transform: none;
  text-indent: 0px;
  text-shadow: none;
  display: inline-block;
  text-align: start;
  appearance: auto;
  -webkit-rtl-ordering: logical;
  cursor: text;
  background-color: -internal-light-dark(rgb(255, 255, 255), rgb(59, 59, 59));
  margin: 0em;
  padding: 1px 2px;
  border-width: 2px;
  border-style: inset;
  border-color: -internal-light-dark(rgb(118, 118, 118), rgb(133, 133, 133));
  border-image: initial;
}
```

### 10.2.1. 公共属性

以下属性为所有类型的 input 输入控件所共有。

1. **name**

name 属性表示 input 表单控件的名字。以名字/值对的形式随表单一起提交。

2. **value**

表单控件的值。以名字/值对的形式随表单一起提交

3. **type**

input 表单控件的类型

4. **disabled**

禁用表单控件

5. **required**

布尔值。表示此值为必填项或者提交表单前必须先检查该值

6. **readonly**

布尔值。存在时表示控件的值不可编辑

7. **autofocus**

页面加载时自动聚焦到此表单控件

8. **autocomplete**

用于表单的自动填充功能

### 10.2.2. 用作文本输入

type 属性设置为 text 的 input 元素在浏览器中显示为一个单行文本框。上一章用到的 input 元素就是这个样子，这是未设置 type 属性情况下的默认形式。

下表罗列了可用于这种类型 input 的各种特殊属性。

| 属性        | 说明                                                                 | 是否为 HTML5 新增 |
| ----------- | -------------------------------------------------------------------- | ----------------- |
| list        | 指定为文本框提供建议值的 datalist 元素，其值为 datalist 元素的 id 值 | 是                |
| size        | 通过指定文本框中可见的字符数目设定其宽度                             | 否                |
| maxlength   | 设定用户可以在文本框中输入的字符的最大数目                           | 否                |
| pattern     | 指定一个用于输入验证的正则表达式                                     | 是                |
| dirname     | 表单区域的一个名字，用于在提交表单时发送元素的方向性                 | 是                |
| placeholder | 指定关于所需数据类型的提示                                           | 是                |

1. **list**

可以将 input 元素的 list 属性设置为一个 datalist 元素的 id 属性值，这样用户在文本框中输入数据时只需要从后一元素提供的一批选项中进行选择就行了。下表概括了 datalist 元素。

| 元素         | datalist               |
| ------------ | ---------------------- |
| 元素类型     | 短语                   |
| 父元素       | 可以包含短语元素的元素 |
| 局部属性     | 无                     |
| 内容         | option 元素和短语元素  |
| 标签         | 开始标签+内容+结束标签 |
| 关于 html5   | 无                     |
| 用户代理样式 | display: none;         |

datalist 元素是 HTML5 中新增的，它可以用来提供一批值，以便帮助用户输入需要的数据。不同类型的 input 元素使用 datalist 元素的方式略有差异。对千 text 型 input 元素，datalist 元素提供的值以自动补全建议值的方式呈现。提供给用户选择的值各用一个 option 元素指定。

下表概括了 option 元素。

| 元素         | option                           |
| ------------ | -------------------------------- |
| 元素类型     | 无                               |
| 父元素       | dadalist, select                 |
| 局部属性     | disabled, selected, label, value |
| 内容         | 文本                             |
| 标签         | 开始标签+内容+结束标签           |
| 关于 html5   | 无                               |
| 用户代理样式 | 见下                             |

option 的用户代理样式如下：

```css
option {
  font-weight: normal;
  display: block;
  white-space: nowrap;
  min-height: 1.2em;
  padding: 0px 2px 1px;
}
```

下面的例子展示了了如何用 datalist 和 option 元素为文本框准备好一批值。

```html
<datalist id="fruits">
  <option>cherry</option>
  <option>banana</option>
  <option>mango</option>
  <option>orange</option>
  <option>blueberry</option>
</datalist>
<input type="text" list="fruits"/>
```

1. **size**

2. **maxlength**

3. **pattern**

4. **dirname**

5. **placeholder**

### 10.2.3. 用作数据输入

### 10.2.4. 用作搜索控件

### 10.2.5. 用作隐藏控件

### 10.2.6. 用作文件上传

## 10.3. button

最后一个关键元素是 button。用户需要有一种方法告诉浏览器：所有数据已经输入完毕，该把它们发给服务器了。这个事情多半是用 button 元素来做。

下表概括了 button 元素。

| 元素         | button                                          |
| ------------ | ----------------------------------------------- |
| 元素类型     | 短语                                            |
| 父元素       | 可以包含短语元素的元素                          |
| 局部属性     | name, disabled, form, type, autofocus, value 等 |
| 内容         | 短语元素                                        |
| 标签         | 开始标签+内容+结束标签                          |
| 关于 html5   | 新增了一些属性                                  |
| 用户代理样式 | 见下                                            |

button 的用户代理样式如下：

```css
button {
  appearance: auto;
  -webkit-writing-mode: horizontal-tb !important;
  font-style: ;
  font-variant-ligatures: ;
  font-variant-caps: ;
  font-variant-numeric: ;
  font-variant-east-asian: ;
  font-weight: ;
  font-stretch: ;
  font-size: ;
  font-family: ;
  text-rendering: auto;
  color: -internal-light-dark(black, white);
  letter-spacing: normal;
  word-spacing: normal;
  line-height: normal;
  text-transform: none;
  text-indent: 0px;
  text-shadow: none;
  display: inline-block;
  text-align: center;
  align-items: flex-start;
  cursor: default;
  box-sizing: border-box;
  background-color: -internal-light-dark(rgb(239, 239, 239), rgb(59, 59, 59));
  margin: 0em;
  padding: 1px 6px;
  border-width: 2px;
  border-style: outset;
  border-color: -internal-light-dark(rgb(118, 118, 118), rgb(133, 133, 133));
  border-image: initial;
}
```

### 10.3.1. submit

如果将 button 元素的 type 属性设置为 submit, 那么按下该按钮会提交包含它的表单。这是未设置 type 属性的 button 元素的默认行为。采用这种方法使用该元素时，它还有额外的一些属性可用，如下表所述。

| 属性           | 说明                                                                 |
| -------------- | -------------------------------------------------------------------- |
| form           | 指定按钮关联的表单                                                   |
| formaction     | 覆盖 form 元素的 action 属性，另行指定表单将要提交到的 URL。         |
| formenctype    | 覆盖 form 元素的 enctype 属性，另行指定表单的编码方式。              |
| fornmethod     | 覆盖 form 元素的 method 属性                                         |
| formtarget     | 覆盖 form 元素的 target 属性。                                       |
| formnovalidate | 覆盖 form 元素的 novalidate 属性，表明是否应执行客户端数据有效性检查 |

### 10.3.2. reset

### 10.3.3. 一般用法

## 10.4. label

label 元素用于表示用户界面中某个元素的说明。

下表概括了 label 元素。

| 元素         | label                  |
| ------------ | ---------------------- |
| 元素类型     | 短语                   |
| 父元素       | 可以包含短语元素的元素 |
| 局部属性     | for, form              |
| 内容         | 短语元素               |
| 标签         | 开始标签+内容+结束标签 |
| 关于 html5   | 新增了一些属性         |
| 用户代理样式 | cursor: default;       |

下面的例子展示了 label 的用法。

```html
<label>用户名：</label>
<input type="text" name="username" />
<label>密码：</label>
<input type="password" name="password" />
```

1. **for**

即和 `<label>` 元素在同一文档中的 可关联标签的元素 的 id。 文档中第一个 id 值与 `<label>` 元素 for 属性值相同的元素，如果可关联标签（labelable），则为已关联标签的控件，其标签就是这个 `<label>` 元素。如果这个元素不可关联标签，则 for 属性没有效果。如果文档中还有其他元素的 id 值也和 for 属性相同，for 属性对这些元素也没有影响。

2. **form**

表示与 label 元素关联的 `<form>` 元素（即它的表单拥有者）。如果声明了该属性，其值应是同一文档中 `<form>` 元素的 id。因此你可以将 label 元素放在文档的任何位置，而不仅作为 `<form>` 元素的后代。

## 10.5. fieldset

对于更复杂的表单，有时需要将一些元素组织在一起。为此可以使用 fieldset 元素。下表概括了这个元素。

| 元素         | fieldset               |
| ------------ | ---------------------- |
| 元素类型     | 流                     |
| 父元素       | 可以包含流元素的元素   |
| 局部属性     | name, form, disabled   |
| 内容         | 流元素，legend         |
| 标签         | 开始标签+内容+结束标签 |
| 关于 html5   | 新增 form 属性         |
| 用户代理样式 | 见下                   |

fieldset 的用户代理样式如下：

```css
fieldset {
  display: block;
  margin-inline-start: 2px;
  margin-inline-end: 2px;
  padding-block-start: 0.35em;
  padding-inline-start: 0.75em;
  padding-inline-end: 0.75em;
  padding-block-end: 0.625em;
  min-inline-size: min-content;
  border-width: 2px;
  border-style: groove;
  border-color: threedface;
  border-image: initial;
}
```

下面的例子展示了 fieldset 的用法。

```html
<form method="post" action="http://localhost:8080/form">
  <fieldset>
    <p>
      <label for="name">
        Name:
        <input id="name" name="name" />
      </label>
    </p>
    <p>
      <label for="name">
        City:
        <input id="city" name="city" />
      </label>
    </p>
  </fieldset>
  <fieldset>
    <p>
      <label for="favel">
        #l:
        <input id="favel" name="fave1" />
      </label>
    </p>
    <p>
      <label for="fave2">
        #2:
        <input id="fave2" name="fave2" />
      </label>
    </p>
    <p>
      <label for="fave3">
        #3:
        <input id="fave3" name="fave3" />
      </label>
    </p>
  </fieldset>
  <button>Submit Vote</button>
</form>
```

1. **legend**

上面的例子中已将 input 元素分别编组， 但是未向用户提供相关说明。在每一个 fieldset 元素中添加一个 legend 元素即可弥补这个缺点，下表概括了这个元素。

```html
| 元素 | legend | | ------------ | ---------------------- | | 元素类型 | 无 | |
父元素 | fieldset | | 局部属性 | 无 | | 内容 | 短语元素 | | 标签 |
开始标签+内容+结束标签 | | 关于 html5 |无 | | 用户代理样式 | 见下 |
```

legend 的用户代理样式为：

```css
legend {
  display: block;
  padding-inline-start: 2px;
  padding-inline-end: 2px;
  border-width: initial;
  border-style: none;
  border-color: initial;
  border-image: initial;
}
```

2. **disabled**

本章前面已经示范过如何禁用单个 input 元素。通过设置 fieldset 元素的 disabled 属性，可以一次性地禁用多个 input 元素。此时 fieldset 元素中包含的所有 input 元素都会被禁用。
