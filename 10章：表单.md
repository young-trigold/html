**目录：**

- [10. 表单](#10-表单)
  - [10.1. form](#101-form)
    - [10.1.1. action](#1011-action)
    - [10.1.2. method](#1012-method)
    - [10.1.3. enctype](#1013-enctype)
    - [10.1.4. autocomplete](#1014-autocomplete)
    - [10.1.5. target](#1015-target)
    - [10.1.6. name](#1016-name)
  - [10.2. input](#102-input)
    - [10.2.1. autofocus](#1021-autofocus)
  - [10.3. button](#103-button)
  - [10.4. label](#104-label)
  - [10.5. fieldset](#105-fieldset)

# 10. 表单

表单是 HTML 中获取用户输入的手段。它对于 Web 应用系统极其重要，然而 HTML 定义的功能落后于表单的使用方式已有多年。在 HTML5 中，整个表单系统巳经彻底改造过，面貌焕然一新，标准的步伐已经跟上了表单的应用实践。

## 10.1. form

HTML `<form>` 元素表示文档中的一个区域，此区域包含交互控件，用于向 Web 服务器提交信息。

下表总结了 form 元素。

| 元素         | form                                                                            |
| ------------ | ------------------------------------------------------------------------------- |
| 元素类型     | 流                                                                              |
| 父元素       | 可以包含流元素的元素，但不能是 form                                             |
| 局部属性     | action, accept-charset, method, enctype, name, autocomplete, target, novalidate |
| 内容         | 流元素，主要是 label 和 input                                                   |
| 标签         | 开始标签+内容+结束标签                                                          |
| 关于 html5   | 新增了 novalidate, autocomplete                                                 |
| 用户代理样式 | display: block; margin-top: 0em;                                                |

### 10.1.1. action

action 属性说明了提交表单时浏览器应该把从用户收集的数据发送到什么地方。我想把数据提交给自己用 nodejs 编写的 web 服务器处理，所以要把表单发至开发服务器 localhost 上位于 8080 端口的/form 这个 URL。

下面的代码展示了这个用法：

```html
<form method="post" action="http://titan:8o8o/form"></form>
```

如果不设置 form 元素的 action 属性， 那么浏览器会将表单数据发到用以加载该 HTML 文档的 URL。这看似毫无意义，其实不然，好几个流行的 Web 应用系统开发框架都依赖于这个特性。

如果为 action 属性指定的是一个相对 URL，那么该值会被嫁接在当前页的 URL（如果使用了介绍过的 base 元素，则是该元素的 href 属性值）的后面。

下面的代码展示了这一点：

```html
<head>
  ...
  <base href="http://localhost:8080" />
  ...
</head>
<body>
  <form action="/form" method="post"></form>
</body>
```

### 10.1.2. method

method 属性指定了用来将表单数据发送到服务器的 HTTP 方法。允许的值有 get 和 post 这两个，它们分别对应于 HTTP 的 GET 和 POST 方法。未设置 method 属性时使用的默认值为 get。

GET 请求是安全的，同一个请求可以发起任意多次而不会产生额外作用。POST 请求则用于不安全交互，提交数据的行为会导致服务器状态的改变。

### 10.1.3. enctype

当 method 属性值为 post 时，enctype 就是将表单的内容提交给服务器的 MIME 类型 。可能的取值有：

- application/x-www-form-urlencoded：未指定属性时的默认值。
- multipart/form-data：当表单包含 type=file 的 `<input>` 元素时使用此值。
- text/plain：出现于 HTML5，用于调试。

这个值可被 `<button>`、`<input type="submit">` 或 `<input type="image">` 元素上的 formenctype 属性覆盖。

下面的例子展示了文件上传的表单：

```html
<form action="/fileupload" method="post" enctype="multipart/form-data">
  <label for="fileupload">上传文件：</label>
  <input type="file" name="file" id="" />
  <button type="submit">上传</button>
</form>
```

### 10.1.4. autocomplete

浏览器可以记住用户输入表单的数据，并在再次遇到类似表单的时候自动使用这些数据帮用户填写。这种技术可以让用户免于反复输入同样的数据之苦。这方面的一个典型例子是用户在线购买商品或服务的时候输入的姓名和送货信息。每个网站都有自己的购物车和注册程序，但是浏览器可以使用用户在其他表单中输入过的数据加快结账过程。用以判断哪些数据可以重复使用的技术因浏览器而异，不过一种常用的方法是查看 input 元素的 name 属性。

一般来说，表单的自动完成功能有益于用户，对 Web 应用系统也有一点帮助。不过有时网页作者并不想让浏览器自动填写表单。

下面的代码示范了如何使用 form 元素的 autocomplete 属性达到这个目的。

```html
<form autocomplete="off" method="post" action="http://localhost:8080/form">
  <input name="fave" />
  <input name="name" />
  <button>Submit Vote</button>
</form>
```

autocomplete 属性允许的值有两个：on 和 off。如果不设置这个属性的话，其默认值为 on, 表示允许浏览器填写表单。

input 元素也有 autocomplete 属性，可以用于单个元素的自动完成功能，form 元素的 autocomplete 属性设置的是表单中的 input 元素默认的行为方式。而各个 input 元素在该属性上的设置可以覆盖这个默认行为方式。上面的代码清单正是这样做的。此例在 form 元素上禁用了自动完成功能，但在第一个 input 元素上 􀃮 仅是在这个元素上，又重新开启了该功能。
至于第二个 input 元素，因为没有设置 autocomplete 属性，所以采用的是 form 层面的设置。

一般来说，最好让自动完成功能保持开启状态。用户习惯让浏览器自动填写表单，而且在网上办理任何一种业务时往往都会用到好几个表单。关闭这个功能千涉了用户的偏好和工作习惯。根据我自己的体会，在禁用了自动完成功能的网站上购物有点折磨人，尤其是需要在表单中填写姓名和地址等非常基本的信息的时候。有些网站对信用卡数据禁用自动完成功能，这个更有意义一点。不过即便如此，这种做法也要谨慎使用，要充分考虑各种理由。

### 10.1.5. target

默认情况下浏览器会用提交表单后服务器反馈的信息替换表单所在的原页面。这可以用 form 元素的 target 属性予以改变。该属性的工作机制与 a 元素的 target 属性一样。

### 10.1.6. name

name 属性可以用来为表单设置一个独一无二的标识符，以便使用 DOM 时区分各个表单。

提交表单时其 name 属性值不会被发送给服务器，所以该属性的用处仅限于 DOM 中，不像 input 元素的同名属性那么重要。要是 input 元素不设置 name 属性， 那么用户在其中输入的数据在提交表单时不会被发送给服务器。

## 10.2. input

第二种关键元素是 input, 其用途是收集用户输入数据。input 元素在浏览器中显示为一个简单的文本框。用户就在这个文本框中输入内容。这是最基本的一种 input 元素。后面会介绍收集用户输入数据的多种选择，包括 HTML5 中新增的一些很棒的特性。

下表概括了 input 元素。

| 元素         | input                                    |
| ------------ | ---------------------------------------- |
| 元素类型     | 短语                                     |
| 父元素       | 可以包含短语元素的元素                   |
| 局部属性     | autofocus, name, disabled, form, type 等 |
| 内容         | 无                                       |
| 标签         | 开始标签                                 |
| 关于 html5   | 新增了各种 type 的 input 元素            |
| 用户代理样式 | 见下                                     |

input 的用户代理样式比较复杂，各个 type 的 input 都有自己的用户代理样式。

```css
input {
  -webkit-writing-mode: horizontal-tb !important;
  font-style: ;
  font-variant-ligatures: ;
  font-variant-caps: ;
  font-variant-numeric: ;
  font-variant-east-asian: ;
  font-weight: ;
  font-stretch: ;
  font-size: ;
  font-family: ;
  text-rendering: auto;
  color: -internal-light-dark(black, white);
  letter-spacing: normal;
  word-spacing: normal;
  line-height: normal;
  text-transform: none;
  text-indent: 0px;
  text-shadow: none;
  display: inline-block;
  text-align: start;
  appearance: auto;
  -webkit-rtl-ordering: logical;
  cursor: text;
  background-color: -internal-light-dark(rgb(255, 255, 255), rgb(59, 59, 59));
  margin: 0em;
  padding: 1px 2px;
  border-width: 2px;
  border-style: inset;
  border-color: -internal-light-dark(rgb(118, 118, 118), rgb(133, 133, 133));
  border-image: initial;
}

input[type='file' i] {
  appearance: none;
  background-color: initial;
  cursor: default;
  align-items: baseline;
  color: inherit;
  text-overflow: ellipsis;
  white-space: pre;
  text-align: start !important;
  padding: initial;
  border: initial;
  overflow: hidden !important;
}
```

### 10.2.1. autofocus

## 10.3. button

最后一个关键元素是 button。用户需要有一种方法告诉浏览器：所有数据已经输入完毕，该把它们发给服务器了。这个事情多半是用 button 元素来做。

下表概括了 button 元素。

| 元素         | button                                          |
| ------------ | ----------------------------------------------- |
| 元素类型     | 短语                                            |
| 父元素       | 可以包含短语元素的元素                          |
| 局部属性     | name, disabled, form, type, autofocus, value 等 |
| 内容         | 短语元素                                        |
| 标签         | 开始标签                                        |
| 关于 html5   | 新增了一些属性                                  |
| 用户代理样式 | 见下                                            |

button 的用户代理样式如下：

```css
button {
  appearance: auto;
  -webkit-writing-mode: horizontal-tb !important;
  font-style: ;
  font-variant-ligatures: ;
  font-variant-caps: ;
  font-variant-numeric: ;
  font-variant-east-asian: ;
  font-weight: ;
  font-stretch: ;
  font-size: ;
  font-family: ;
  text-rendering: auto;
  color: -internal-light-dark(black, white);
  letter-spacing: normal;
  word-spacing: normal;
  line-height: normal;
  text-transform: none;
  text-indent: 0px;
  text-shadow: none;
  display: inline-block;
  text-align: center;
  align-items: flex-start;
  cursor: default;
  box-sizing: border-box;
  background-color: -internal-light-dark(rgb(239, 239, 239), rgb(59, 59, 59));
  margin: 0em;
  padding: 1px 6px;
  border-width: 2px;
  border-style: outset;
  border-color: -internal-light-dark(rgb(118, 118, 118), rgb(133, 133, 133));
  border-image: initial;
}
```

## 10.4. label

## 10.5. fieldset
