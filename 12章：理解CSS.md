**目录：**

- [12. 理解 CSS](#12-理解-css)
  - [12.1. CSS 标准化](#121-css-标准化)
  - [12.2. 盒模型](#122-盒模型)
  - [12.3. 选择器概览](#123-选择器概览)
    - [12.3.1. 基本选择器](#1231-基本选择器)
    - [12.3.2. 组合选择器](#1232-组合选择器)
    - [12.3.3. 伪元素选择器](#1233-伪元素选择器)
    - [12.3.4. 伪类选择器](#1234-伪类选择器)
    - [12.3.5. 分组选择器](#1235-分组选择器)
  - [12.4. 属性概览](#124-属性概览)
    - [12.4.1. 背景和边框](#1241-背景和边框)
    - [12.4.2. 盒模型属性](#1242-盒模型属性)
    - [12.4.3. 布局属性](#1243-布局属性)
    - [12.4.4. 文本属性](#1244-文本属性)
    - [12.4.5. 过渡，动画和变换属性](#1245-过渡动画和变换属性)

# 12. 理解 CSS

接下来的几章我们来看看 CSS (Cascading Style Sheet, 层叠样式表）定义的属性。前面简单回顾了 CSS 的基础知识，在深入研究细节之前，我们先通过本章来了解一些其他的背景知识。

## 12.1. CSS 标准化

CSS 有一段不堪回首的历史。那时候浏览器被看做划分市场的工具，浏览器厂商将 CSS 作为创建自己软件特有功能的利器。当时的情况可谓一团糟：具有相同名称的属性采用不同的方式处理，只能用浏览器特定的属性访问浏览器特定的功能。结果是 Web 开发人员不得不创建只在一种浏览器上运行的站点或应用程序。

好的一面是，不同浏览器通常会因速度、易用性以及与 CSS 等标准的兼容性而呈现差别（最后一点发挥的作用正越来越大）；不好的一面是 CSS 标准化过程并不理想。

在接下来的几章你会看到，CSS 包含大量功能。W3C (CSS 和 HTML 的标准组织） 并不想创建一个单一标准，而是将 CSS3 分割为多个模块(module)，并允许每个模块根据自身需要进行更新。这个想法非常了不起，它明显优于单一方法一—当然，这也代表不存在 CSS3 兼容性的整体标准了，开发人员需要仔细考量每一个模块，并判断是否已获得足够广泛的支持来使用该模块。

还有一个比较棘手的问题：目前还没有 CSS3 模块达到标准化过程的最后阶段（成为 W3C 推荐标准）。有些模块，特别是那些引入 CSS 新功能的模块，还只处于标准化过程的早期阶段（工作草案） ，随时都有可能变化。可能添加、修改或删除属性；可能出现新模块，也可能毙掉旧模块；不同模块之间的关系可能发生变化（某些模块往往依赖于其他模块中定义的属性或单位）。因此，当你阅读本书时，某些比较新的属性可能已经跟我撰写本书时有所不同了。

接下来的几章我会介绍一些比较稳定的模块的属性，没什么特殊情况的话，主流浏览器很快就会实现这些属性。这些特性基本已经稳定了，新版本的浏览器都会支持。有时候开发人员并不确定某个属性是否适合自己的项目。

在模块定义还不太稳定的阶段，浏览器会采用厂商前缀实现某个特性。这种做法不同以往，它允许早期采纳者试用浏览器实现的这些新属性。本书尽量避开这些试验性属性，但如果某些 CSS3 特性实在非常重要，我会在示例中加上厂商前缀。无论如何，带厂商前缀的实现都非常接近规范。

不同浏览器的厂商前缀不同，下表列出了几个常见浏览器厂商前缀。

| 浏览器            | 前缀     |
| ----------------- | -------- |
| Chrome, Safari    | -webkit- |
| Opera             | -o-      |
| Firefox           | -moz-    |
| Internet Explorer | -ms-     |

## 12.2. 盒模型

CSS 中的一个基本概念是盒模型(box model)。可见元素会在页面中占据一个矩形区域，该区域就是元素的盒子(box)，由四部分组成，由内到外为：元素内容->内边距->边框->外边距。

元素盒子有两个部分是可见的：元素内容和边框。内边距是内容和边框之间的空间，外边距是边框和页面上其他元素之间的空间。理解这四部分之间的相互关系对于高效利用 CSS 至关重要。在接下来的章节中，我们会学习控制外边距、内边距、边框的属性，以及控制内容整体外观的属性。

元素还可以包含其他元素。这种情况下，父元素的内容盒子称为子元素的 **块容器(container block)**，通常称为容器。

可以使用包含块的特征限定元素的外观。这不光适用于层叠属性和继承属性，还适用于显式定义的属性。

## 12.3. 选择器概览

我们将选择器及添加它们的 CSS 版本总结在下表中。

### 12.3.1. 基本选择器

| 选择器     | 语法       | 例子       | 说明                 | CSS 版本 |
| ---------- | ---------- | ---------- | -------------------- | -------- |
| 通用选择器 | \*         | \*         | 所有元素             | 2        |
| 元素选择器 | tagName    | input      | 特定标签名的元素     | 1        |
| 类选择器   | .className | .container | 特定类名的元素       | 1        |
| id 选择器  | #idName    | #nav-bar   | 特定 id 名的元素     | 1        |
| 属性选择器 | [attr] 等  | [checked]  | 和特定属性联系的元素 | 2, 3     |

### 12.3.2. 组合选择器

| 选择器         | 语法                            | 例子      | 说明                            | CSS 版本             |
| -------------- | ------------------------------- | --------- | ------------------------------- | -------------------- | --- |
| 后代选择器     | <基本选择器 A> <基本选择器 B>   | div, span | A 选定元素的包含 B 元素         | 1                    |
| 直接后代选择器 | <基本选择器 A> > <基本选择器 B> | div>span  | A 选定元素的直接包含 B 元素     | 2                    |
| 兄弟选择器     | <基本选择器 A> ~ <基本选择器 B> | p ~ span  | A 选定元素之后的同级 B 元素     | 3                    |
| 紧邻兄弟选择器 | <基本选择器 A> + <基本选择器 B> | p + span  | A 选定元素之后紧跟的同级 B 元素 | 2                    |
| 列选择器       | <列选择器>                      |           | <单元格选择器>                  | 选择列中的单元格元素 | 4   |

### 12.3.3. 伪元素选择器

| 选择器         | 语法                             | 例子            | 说明                                       | CSS 版本 |
| -------------- | -------------------------------- | --------------- | ------------------------------------------ | -------- |
| ::after        | <非伪元素选择器 S>::after        | p::after        | 创建一个子元素插入 S 的最后面              | 3        |
| :after         | <非伪元素选择器 S>:after         | p:after         | 创建一个子元素插入 S 的最后面，兼容 IE8    | 2        |
| ::before       | <非伪元素选择器 S>::before       | p::before       | 创建一个子元素插入 S 的最前面              | 3        |
| :before        | <非伪元素选择器 S>:before        | p:before        | 创建一个子元素插入 S 的最前面，兼容 IE8    | 2        |
| ::first-letter | <非伪元素选择器 S>::first-letter | p::first-letter | 选取第一个块级元素的文本内容的第一个字母   | 3        |
| :first-letter  | <非伪元素选择器 S>:first-letter  | p:first-letter  | 选取第一个块级元素的文本内容的第一个字母   | 2        |
| ::first-line   | <非伪元素选择器 S>::first-line   | p::first-line   | 选取第一个块级元素的文本内容的第一行       | 3        |
| :first-line    | <非伪元素选择器 S>:first-line    | p:first-line    | 选取第一个块级元素的文本内容的第一个字母   | 2        |
| ::selection    | <非伪元素选择器 S>::selection    | p::selectiob    | 选取第一个块级元素文本内容被用户高亮的部分 | 3        |

### 12.3.4. 伪类选择器

| 选择器               | 语法                          | 例子                   | 说明                                  | CSS 版本 |
| -------------------- | ----------------------------- | ---------------------- | ------------------------------------- | -------- |
| :first-child         | <选择器>:first-child          | p:first-child          | 选定元素中第一个子元素                | 2        |
| :last-child          | <选择器>:last-child           | p:last-child           | 选定元素中最后一个子元素              | 3        |
| :only-child          | <选择器>:last-child           | p:only-child           | 选定元素中唯一一个子元素              | 3        |
| :only-of-type        | <选择器>:only-of-type         | p:last-child           | 选定元素中唯一一个类型的子元素        | 3        |
| :nth-child(n)        | <选择器>:nth-child(n)         | p:nth-child-n          | 选定元素中第 n 个子元素               | 3        |
| :nth-last-child(n)   | <选择器>:nth-last-child(n)    | p:nth-last-child-n     | 选定元素中倒数第 n 个子元素           | 3        |
| :nth-of-type(n)      | <选择器>:nth-of-type(n)       | p:nth-of-type(n)       | 选定元素中特定类型的第 n 个子元素     | 3        |
| :nth-last-of-type(n) | <选择器>::nth-last-of-type(n) | p::nth-last-of-type(n) | 选定元素中特定类型的倒数第 n 个子元素 | 3        |
| :link                | <链接选择器>:link             | a:link                 | 选定链接的没有被访问状态              | 1        |
| :visited             | <链接选择器>:visited          | a:visited              | 选定链接的被访问状态                  | 1        |
| :hover               | <选择器>:hover                | div:hover              | 选定元素的被鼠标悬浮状态              | 2        |
| :active              | <选择器>:active               | a:active               | 选定元素的被激活状态                  | 2        |
| :enabled             | <选择器>:enabled              | button:enabled         | 选取已启用的元素                      | 3        |
| :disabled            | <选择器>:disabled             | button:disabled        | 选取已禁用的元素                      | 3        |
| :valid               | <选择器>:valid                | input:valid            | 选取验证有效的元素状态                | 3        |
| :invalid             | <选择器>:invalid              | input:invalid          | 选取验证无效的元素状态                | 3        |
| :required            | <选择器>:required             | input:required         | 选取必需的元素                        | 3        |
| :optional            | <选择器>:optional             | input:optional         | 选取非必需的元素状态                  | 3        |
| :checked             | <选择器>:checked              | input:checked          | 选取已选中的单选框和复选框            | 3        |
| :focus               | <选择器>:focus                | input:focus            | 选取已聚焦的元素状态                  | 3        |
| :empty               | <选择器>:empty                | p:empty                | 选择没有任何子元素的特定元素          | 3        |
| :not                 | <选择器>:not(<选择器>)        | p:not<.fancy>          | 选择不匹配特定选择器的元素            | 3        |
| :target              | <选择器>:target               | :target                | 选择 URL 片段标识符指向的元素         | 3        |

### 12.3.5. 分组选择器

| 选择器     | 语法                        | 例子       | 说明                     | CSS 版本 |
| ---------- | --------------------------- | ---------- | ------------------------ | -------- |
| 分组选择器 | <选择器 1>, <选择器 2>, ... | h1, h2, h3 | 每个选择器选中元素的并集 | 1        |

## 12.4. 属性概览

下面总结了 CSS 属性及添加相应属性的 CSS 版本。

### 12.4.1. 背景和边框



### 12.4.2. 盒模型属性

### 12.4.3. 布局属性

### 12.4.4. 文本属性

### 12.4.5. 过渡，动画和变换属性
